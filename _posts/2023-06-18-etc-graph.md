---
title: etc graph
date: 2023-06-18 23:40 +0900
author: JyZo
categories: [Algorithm, theory]
tags: [Algorithm, theory]
---


# 기타 그래프 이론

## **알고리즘에서 추가적으로 필요한 기타 그래프 이론 정리**

<br/>

# 서로소

## 서로소 집합(Disjoint Sets)란 **공통 원소가 없는 두 집합**을 의미
- 서로서 부분 집합들로 나누어진 원소들의 데이터를 처리하기 위한 자료구조
- 서로소 집합 자료구조는 두 종류의 연산을 지원
  - **합집합(Union)**: 두 개의 원소가 포함된 집합을 하나의 집합으로 합치는 연산
  - **찾가(Find)** : 특정한 원소가 속한 집합이 어떤 집합인지 알려주는 연산
- 서로소 집합 자료구조는 **합치기 찾기(Union Find)자료구조** 라고 불리기도 한다.

![disjoint_sets](/assets/img/post_img/disjoint_sets.PNG "disjoint_sets")

<br/>

- 여러 개의 합치기 연산이 주어졌을 때 서로소 집합 자료구조의 동작과정
   - 1.합집합(Union) 연산을 확인하여, 서로 연결된 두 노드 A,B를 확인
      - 1)A와 B의 루트 노드 A',B'를 각각 찾는다.
      - 2)A'를 B'의 부모 노드로 설정한다.
   - 2.모든 합집합(Union) 연산을 처리할 때까지 1 번의 과정을 반복한다. 


![disjoint_sets1](/assets/img/post_img/disjoint_sets1.PNG "disjoint_sets1")

<br/>
<br/>

![disjoint_sets2](/assets/img/post_img/disjoint_sets2.PNG "disjoint_sets2")

<br/>
<br/>

![disjoint_sets3](/assets/img/post_img/disjoint_sets3.PNG "disjoint_sets3")

<br/>
<br/>

![disjoint_sets4](/assets/img/post_img/disjoint_sets4.PNG "disjoint_sets4")

<br/>
<br/>

![disjoint_sets5](/assets/img/post_img/disjoint_sets5.PNG "disjoint_sets5")

<br/>
<br/>

![disjoint_sets6](/assets/img/post_img/disjoint_sets6.PNG "disjoint_sets6")

<br/>
<br/>

![disjoint_sets7](/assets/img/post_img/disjoint_sets7.PNG "disjoint_sets7")

<br/>
<br/>

```java
public class Practice {
    public static int v, e;
    public static int[] parent = new int[100001];

    public static int findParent(int x) {
        if (x == parent[x]) return x;
        return findParent(parent[x]);
    }
    public static void unionParent(int a, int b) {
        a = findParent(a);
        b = findParent(b);
        if (a < b) parent[b] = a;
        else parent[a] = b;
    }

    public static void main(String[] args) {
        Scanner sc = new Scanner(System.in);

        v = sc.nextInt();
        e = sc.nextInt();

        for (int i = 1; i <= v; i++) {
            parent[i] = i;
        }

        for (int i = 0; i < e; i++) {
            int a = sc.nextInt();
            int b = sc.nextInt();
            unionParent(a, b);
        }

        System.out.print("각 원소가 속한 집합: ");
        for (int i = 1; i <= v; i++) {
            System.out.print(findParent(i) + " ");
        }
        System.out.println();
        
        System.out.print("부모 테이블: ");
        for (int i = 1; i <= v; i++) {
            System.out.print(parent[i] + " ");
        }
        System.out.println();
    }
}
```

하지만 위의 경우 합집합 연산이 편향되게 이루어질때 문제가 발생한다
예를 들면 find 함수로 부모를 찾을때 최악의 경우에는 모든 노드를 다 찾는 현상이 생길 수 있어 개선이 필요하다.

<br/>

```java
public static int findParent(int x) {
        if (x == parent[x]) return x;
        return parent[x] = findParent(parent[x]);
    }
```

<br/>

- 찾기 함수를 재귀적으로 호출하지만 부모노드를 갱신하여 최적화 하였다.

# 서로소 집합을 활용한 사이클 판별

- 서로소 집합은 무방향 그래프내에서의 사이클을 판별할 때 사용
  - 방향그래프에서의 사이클 여부는 DFS를 이용하여 판별가능

- 사이클 판별 알고리즘은 다음과 같다.
  - 1. 각 간선을 하나씩 확인하며 두 노드의 루트노드를 확인
    - 1) 루트 노드가 서로 다르다면 두 노드에 대하여 합집합(Union) 연산 수행
    - 2) 루트 노드가 서로 같다면 사이클이 발생
  - 2. 그래프에 포함되어 있는 모든 간선에 대하여 1번과정을 반복


![disjoint_sets_cycle1](/assets/img/post_img/disjoint_sets_cycle1.PNG "disjoint_sets_cycle1")

<br/>
<br/>

![disjoint_sets_cycle2](/assets/img/post_img/disjoint_sets_cycle2.PNG "disjoint_sets_cycle2")

<br/>
<br/>

![disjoint_sets_cycle3](/assets/img/post_img/disjoint_sets_cycle3.PNG "disjoint_sets_cycle3")

<br/>
<br/>

![disjoint_sets_cycle4](/assets/img/post_img/disjoint_sets_cycle4.PNG "disjoint_sets_cycle4")

<br/>
<br/>

```java
boolean cycle = false; // 사이클 발생 여부

        for (int i = 0; i < e; i++) {
            int a = sc.nextInt();
            int b = sc.nextInt();
            // 사이클이 발생한 경우 종료
            if (findParent(a) == findParent(b)) {
                cycle = true;
                break;
            }
            // 사이클이 발생하지 않았다면 합집합(Union) 연산 수행
            else {
                unionParent(a, b);
            }
        }

        if (cycle) {
            System.out.println("사이클이 발생했습니다.");
        }
        else {
            System.out.println("사이클이 발생하지 않았습니다.");
        }
    }
```

- 발생여부 변수를 넣어 사이클 확인 로직을 추가하면 된다.


















   ------

출처 - 나동빈 개발자님 유튜브[[https://www.youtube.com/@dongbinna](https://www.youtube.com/@dongbinna)]